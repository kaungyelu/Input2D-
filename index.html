<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2D Betting System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Pyidaungsu', 'Myanmar Text', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 5px;
            line-height: 1.6;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
            border-bottom: 3px solid #3498db;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .subtitle {
            font-size: 14px;
            opacity: 0.8;
        }

        .list-header {
            background: white;
            padding: 15px;
            border-bottom: 1px solid #eee;
            position: sticky;
            top: 90px;
            z-index: 90;
        }

        .list-header h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 2px solid #3498db;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .column-headers {
            display: flex;
            justify-content: space-between;
            background: #f8f9fa;
            padding: 8px 10px;
            border-radius: 6px;
            font-weight: bold;
            color: #2c3e50;
            border: 1px solid #e9ecef;
            position: sticky;
            top: 160px;
            z-index: 80;
        }

        .column-number { width: 25%; text-align: center; }
        .column-amount { width: 35%; text-align: center; }
        .column-type { width: 25%; text-align: center; }
        .column-action { width: 15%; text-align: center; }

        .list-view {
            padding: 0 15px;
            max-height: 300px;
            overflow-y: auto;
        }

        .bet-list {
            min-height: 100px;
        }

        .bet-item {
            background: #f8f9fa;
            margin: 6px 0;
            padding: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
            border: 1px solid #e9ecef;
        }

        .bet-item:hover {
            transform: translateX(3px);
            background: #e9ecef;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .bet-number {
            width: 25%;
            text-align: center;
            font-weight: bold;
            color: #2c3e50;
            font-size: 16px;
        }

        .bet-amount {
            width: 35%;
            text-align: center;
            color: #e74c3c;
            font-weight: bold;
            font-size: 15px;
        }

        .bet-type {
            width: 25%;
            text-align: center;
            color: #3498db;
            font-size: 13px;
            background: #e3f2fd;
            padding: 4px 8px;
            border-radius: 12px;
        }

        .delete-btn {
            width: 15%;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .delete-btn:hover {
            background: #c0392b;
            transform: scale(1.05);
        }

        .text-view {
            padding: 12px 15px;
            background: #34495e;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            bottom: 0;
            z-index: 100;
        }

        .total-amount {
            font-size: 18px;
            font-weight: bold;
            color: #2ecc71;
            flex: 1;
            text-align: center;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 6px;
            font-family: 'Pyidaungsu', 'Myanmar Text', sans-serif;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .clear-btn {
            background: #e74c3c;
            color: white;
        }

        .clear-btn:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }

        .save-btn {
            background: #3498db;
            color: white;
        }

        .save-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .edit-view {
            padding: 20px;
        }

        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-family: 'Pyidaungsu', 'Myanmar Text', sans-serif;
            font-size: 16px;
            resize: vertical;
            min-height: 120px;
            margin-bottom: 15px;
            transition: border 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .button-group {
            display: flex;
            gap: 10px;
        }

        button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-family: 'Pyidaungsu', 'Myanmar Text', sans-serif;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .a1-btn {
            background: #95a5a6;
            color: white;
        }

        .a1-btn:hover {
            background: #7f8c8d;
            transform: translateY(-2px);
        }

        .a2-btn {
            background: #95a5a6;
            color: white;
        }

        .a2-btn:hover {
            background: #7f8c8d;
            transform: translateY(-2px);
        }

        .a3-btn {
            background: #2ecc71;
            color: white;
        }

        .a3-btn:hover {
            background: #27ae60;
            transform: translateY(-2px);
        }

        .empty-message {
            text-align: center;
            color: #7f8c8d;
            padding: 30px 20px;
            font-style: italic;
            background: #f8f9fa;
            border-radius: 8px;
            margin: 10px 0;
        }

        .example-text {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 5px;
        }

        .special-bet {
            border-left-color: #e74c3c;
        }

        .closed-number {
            opacity: 0.5;
            text-decoration: line-through;
            border-left-color: #95a5a6;
        }

        .list-count {
            background: #3498db;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 12px;
        }

        @media (max-width: 480px) {
            .container {
                border-radius: 10px;
            }
            
            header {
                padding: 15px;
            }
            
            h1 {
                font-size: 20px;
            }
            
            .bet-number, .bet-amount, .bet-type {
                font-size: 14px;
            }
            
            .column-headers {
                font-size: 13px;
                padding: 6px 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>2D Betting System</h1>
            <div class="subtitle">လောင်းကြေးစနစ်</div>
        </header>
        
        <!-- List Header (Fixed) -->
        <div class="list-header">
            <h3>လောင်းကြေးများ <span id="listCount" class="list-count">0</span></h3>
            <div class="column-headers">
                <div class="column-number">ဂဏန်း</div>
                <div class="column-amount">ငွေပမာဏ</div>
                <div class="column-type">အမျိုးအစား</div>
                <div class="column-action">Action</div>
            </div>
        </div>
        
        <!-- List View (Scrollable) -->
        <div class="list-view">
            <div id="betList" class="bet-list">
                <div class="empty-message">လောင်းကြေးမရှိသေးပါ</div>
            </div>
        </div>
        
        <!-- Text View for Total -->
        <div class="text-view">
            <button id="clearAllBtn" class="action-btn clear-btn">Clear All</button>
            <div id="totalAmount" class="total-amount">0</div>
            <button id="saveBtn" class="action-btn save-btn">Save</button>
        </div>
        
        <!-- Edit Text for Input -->
        <div class="edit-view">
            <textarea 
                id="betInput" 
                placeholder="ဥပမာ: 
12-1000 (ရိုးရိုး)
12/34/56-1000 (ဂဏန်းများစု)
12r1000 (12နှင့်21)
24-1000r500 (24-1000, 42-500)
12/34/56-1000r500 (12-1000,21-500,34-1000,43-500,56-1000,65-500)
အပူး1000 (00,11,22,...)
123ခွေ1000 (ခွေ)
123ခွေပူး1000
1ထိပ်1000 (ထိပ်)
1ပိတ်1000(ပိတ်)
1ဘီ ဘ b bk Bk ဘရိတ်
ပါဝါ နက္ခ ညီကို ကိုညီ 
စုံစုံ1000 (စုံ-စုံဂဏန်း)
မမ1000 (မ-မဂဏန်း)
1စုံ
1မ
1စုံr
1မr
"
                rows="4"
            ></textarea>
            <div class="example-text">ဂဏန်းနှင့်ငွေကြေးကို မှန်ကန်စွာထည့်ပါ (အနည်းဆုံး ၁၀၀)</div>
            <div class="button-group">
                <button id="a1Btn" class="a1-btn">Clear Input</button>
                <button id="a2Btn" class="a2-btn">Prepare</button>
                <button id="a3Btn" class="a3-btn">Add Bets</button>
            </div>
        </div>
    </div>
<script>
    // Global variables
    let bets = [];
    let totalAmount = 0;
    let closedNumbers = new Set();
    let preparedBets = [];

    // DOM elements
    const betInput = document.getElementById('betInput');
    const a1Btn = document.getElementById('a1Btn');
    const a2Btn = document.getElementById('a2Btn');
    const a3Btn = document.getElementById('a3Btn');
    const clearAllBtn = document.getElementById('clearAllBtn');
    const saveBtn = document.getElementById('saveBtn');
    const betList = document.getElementById('betList');
    const totalAmountDisplay = document.getElementById('totalAmount');
    const listCount = document.getElementById('listCount');

    // Event listeners
    a2Btn.addEventListener('click', prepareBets);
    a3Btn.addEventListener('click', addPreparedBetsWithConfirmation);
    a1Btn.addEventListener('click', clearInput);
    clearAllBtn.addEventListener('click', clearAllBets);
    saveBtn.addEventListener('click', saveBets);
    
    betInput.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'Enter') {
            prepareBets();
        }
    });

    // Function to normalize text for reverse
    function normalizeReverseText(text) {
        return text.replace(/[rR@&]/g, 'r');
    }

    // Function to normalize brake text
    function normalizeBrakeText(text) {
        return text.replace(/(ဘရိတ်|ဘ|ဘီ|Bk|bk|B)/gi, 'ဘရိတ်');
    }

    // Function to normalize pa text
    function normalizePaText(text) {
        return text.replace(/(ပါ|ပတ်|အပတ်|p|P)/gi, 'ပါ');
    }

    // Function to reverse a number
    function reverseNumber(n) {
        const s = String(n).padStart(2, '0');
        return parseInt(s.split('').reverse().join(''));
    }

    // Special cases definitions
    const specialCases = {
        'အပူး': [0, 11, 22, 33, 44, 55, 66, 77, 88, 99],
        'ပါဝါ': [5, 16, 27, 38, 49, 50, 61, 72, 83, 94],
        'နက္ခ': [7, 18, 24, 35, 42, 53, 69, 70, 81, 96],
        'ညီကို': [1, 12, 23, 34, 45, 56, 67, 78, 89, 90],
        'ကိုညီ': [9, 10, 21, 32, 43, 54, 65, 76, 87, 98]
    };

    // Even/Odd system
    const evenOddCases = {
        'စုံစုံ': { first: 'even', second: 'even' },
        'မမ': { first: 'odd', second: 'odd' },
        'စုံမ': { first: 'even', second: 'odd' },
        'မစုံ': { first: 'odd', second: 'even' }
    };

    const evenDigits = [0, 2, 4, 6, 8];
    const oddDigits = [1, 3, 5, 7, 9];

    // All supported separators
    const allSeparators = /[\/\-\*\=\+\@\#\$\%\&\_\"\'\:\;\!\(\)\?\\\.\ ,]/;

    // Function to prepare bets (A2 button) - Now empty
    function prepareBets() {
        // This function is now empty as requested
        // User will fill this later when needed
    }

    // Function to add prepared bets with confirmation (A3 button)
    function addPreparedBetsWithConfirmation() {
        const inputText = betInput.value.trim();
        if (!inputText) {
            alert('လောင်းကြေးထည့်ပါ');
            return;
        }

        const lines = inputText.split('\n');
        preparedBets = [];
        let hasError = false;

        for (const line of lines) {
            const trimmedLine = line.trim();
            if (!trimmedLine) continue;

            let normalizedLine = normalizeReverseText(trimmedLine);
            normalizedLine = normalizeBrakeText(normalizedLine);
            normalizedLine = normalizePaText(normalizedLine);

            const lineBets = parseBetLine(normalizedLine);
            if (lineBets.length > 0) {
                preparedBets.push(...lineBets);
            } else {
                hasError = true;
                console.log('Parse error for line:', normalizedLine);
            }
        }

        if (preparedBets.length === 0 && hasError) {
            alert('လောင်းကြေးဖော်မတ်မှားနေပါသည်');
            return;
        }

        // Show preview alert like prepare button
        const totalPreparedAmount = preparedBets.reduce((sum, bet) => sum + bet.amount, 0);
        const confirmed = confirm(`ပြင်ဆင်ပြီးပါပြီ။\nစုစုပေါင်း ${preparedBets.length} ခု\n${totalPreparedAmount.toLocaleString()}\n\nOK နှိပ်ပြီးထည့်ပါ`);
        
        if (confirmed) {
            addPreparedBets();
        }
    }

    // Function to add prepared bets to main list
    function addPreparedBets() {
        if (preparedBets.length === 0) {
            alert('မတင်ထားသောလောင်းကြေးများမရှိပါ');
            return;
        }

        // Add prepared bets to main list
        bets.push(...preparedBets);
        
        // Update total
        preparedBets.forEach(bet => {
            totalAmount += bet.amount;
        });

        updateDisplay();
        betInput.value = '';
        preparedBets = [];
        
        // Auto scroll to bottom of list to see the last item
        setTimeout(() => {
            const listView = document.querySelector('.list-view');
            listView.scrollTop = listView.scrollHeight;
        }, 100);
    }

    // Function to parse a single line of bet input
    function parseBetLine(line) {
        const bets = [];
        
        // 1. Check for dynamic types with reverse (ထိပ်, ပိတ်)
        const dynamicTypes = ['ထိပ်', 'ပိတ်'];
        for (const dtype of dynamicTypes) {
            if (line.includes(dtype) && line.includes('r')) {
                const dynamicReverseBets = parseDynamicReverseBet(line, dtype);
                if (dynamicReverseBets.length > 0) return dynamicReverseBets;
            }
        }
        
        // 2. First check for group reverse patterns
        const groupReverseBets = parseGroupReverseBet(line);
        if (groupReverseBets.length > 0) return groupReverseBets;
        
        // 3. Check for single reverse complex patterns like "24-1000r500"
        const reverseComplexBets = parseReverseComplexBet(line);
        if (reverseComplexBets.length > 0) return reverseComplexBets;
        
        // 4. Check for wheel cases (ခွေ, ခွေပူး)
        if (line.includes('ခွေ')) {
            const wheelBets = parseWheelBet(line);
            if (wheelBets.length > 0) return wheelBets;
        }

        // 5. Check for special cases
        for (const [caseName, caseNumbers] of Object.entries(specialCases)) {
            if (line.includes(caseName)) {
                const specialBets = parseSpecialBet(line, caseName, caseNumbers);
                if (specialBets.length > 0) return specialBets;
            }
        }

        // 6. Check for Even/Odd system
        for (const [caseName, caseType] of Object.entries(evenOddCases)) {
            if (line.includes(caseName)) {
                const evenOddBets = parseEvenOddBet(line, caseName, caseType);
                if (evenOddBets.length > 0) return evenOddBets;
            }
        }

        // 7. Check for single digit with Even/Odd
        const singleEvenOddMatch = line.match(/^(\d)(စုံ|မ)r?(\d+)$/);
        if (singleEvenOddMatch) {
            const singleEvenOddBets = parseSingleEvenOddBet(singleEvenOddMatch);
            if (singleEvenOddBets.length > 0) return singleEvenOddBets;
        }

        // 8. Check for dynamic types (ထိပ်, ပိတ်, ဘရိတ်, ပါ)
        for (const dtype of dynamicTypes) {
            if (line.includes(dtype)) {
                const dynamicBets = parseDynamicBet(line, dtype);
                if (dynamicBets.length > 0) return dynamicBets;
            }
        }

        // 9. Check for simple reverse system (r)
        if (line.includes('r')) {
            const reverseBets = parseSimpleReverseBet(line);
            if (reverseBets.length > 0) return reverseBets;
        }

        // 10. Regular number-amount format (fallback)
        const regularBets = parseRegularBet(line);
        if (regularBets.length > 0) return regularBets;

        return bets;
    }

    // Parse dynamic reverse bets (ထိပ်r, ပိတ်r)
    function parseDynamicReverseBet(line, dtype) {
        const bets = [];
        
        const reverseMatch = line.match(new RegExp(`^(\\d+)${dtype}(\\d+)r(\\d+)$`));
        if (reverseMatch) {
            const [, digitStr, amount1Str, amount2Str] = reverseMatch;
            const digit = parseInt(digitStr);
            const amount1 = parseInt(amount1Str);
            const amount2 = parseInt(amount2Str);
            
            if (digit >= 0 && digit <= 9 && amount1 >= 100 && amount2 >= 100) {
                if (dtype === 'ထိပ်') {
                    // ထိပ် with reverse - create both ထိပ် and ပိတ် bets
                    for (let i = 0; i <= 9; i++) {
                        bets.push({
                            number: digit * 10 + i,
                            amount: amount1,
                            display: (digit * 10 + i).toString().padStart(2, '0'),
                            type: 'ထိပ်'
                        });
                    }
                    
                    for (let i = 0; i <= 9; i++) {
                        bets.push({
                            number: i * 10 + digit,
                            amount: amount2,
                            display: (i * 10 + digit).toString().padStart(2, '0'),
                            type: 'ပိတ်'
                        });
                    }
                } else if (dtype === 'ပိတ်') {
                    // ပိတ် with reverse - create both ပိတ် and ထိပ် bets
                    for (let i = 0; i <= 9; i++) {
                        bets.push({
                            number: i * 10 + digit,
                            amount: amount1,
                            display: (i * 10 + digit).toString().padStart(2, '0'),
                            type: 'ပိတ်'
                        });
                    }
                    
                    for (let i = 0; i <= 9; i++) {
                        bets.push({
                            number: digit * 10 + i,
                            amount: amount2,
                            display: (digit * 10 + i).toString().padStart(2, '0'),
                            type: 'ထိပ်'
                        });
                    }
                }
                
                return bets;
            }
        }
        
        return [];
    }

    // Parse group reverse bets with various separators
    function parseGroupReverseBet(line) {
        const bets = [];
        
        const groupReverseMatch = line.match(/^([\d\s\.\-\/]+?)[\-\s\.]*(\d+)\s*r\s*(\d+)$/);
        if (groupReverseMatch) {
            const [, numbersPart, amount1Str, amount2Str] = groupReverseMatch;
            const amount1 = parseInt(amount1Str);
            const amount2 = parseInt(amount2Str);
            
            if (amount1 >= 100 && amount2 >= 100) {
                const numbers = [];
                const numberStrings = numbersPart.split(/[\/\-\*\.\s]+/);
                
                numberStrings.forEach(str => {
                    const numStr = str.replace(/\D/g, '');
                    if (numStr.length === 1 || numStr.length === 2) {
                        const num = parseInt(numStr);
                        if (num >= 0 && num <= 99 && !isNaN(num)) {
                            numbers.push(num);
                        }
                    }
                });
                
                if (numbers.length > 0) {
                    numbers.forEach(num => {
                        bets.push({
                            number: num,
                            amount: amount1,
                            display: num.toString().padStart(2, '0'),
                            type: 'Group Reverse'
                        });
                        
                        const revNum = reverseNumber(num);
                        bets.push({
                            number: revNum,
                            amount: amount2,
                            display: revNum.toString().padStart(2, '0'),
                            type: 'Group Reverse'
                        });
                    });
                    
                    return bets;
                }
            }
        }
        
        const groupReverseAfterMatch = line.match(/^([\d\s\.\-\/]+?)r\s*(\d+)\s*[\-\s\.]+\s*(\d+)$/);
        if (groupReverseAfterMatch) {
            const [, numbersPart, amount1Str, amount2Str] = groupReverseAfterMatch;
            const amount1 = parseInt(amount1Str);
            const amount2 = parseInt(amount2Str);
            
            if (amount1 >= 100 && amount2 >= 100) {
                const numbers = [];
                const numberStrings = numbersPart.split(/[\/\-\*\.\s]+/);
                
                numberStrings.forEach(str => {
                    const numStr = str.replace(/\D/g, '');
                    if (numStr.length === 1 || numStr.length === 2) {
                        const num = parseInt(numStr);
                        if (num >= 0 && num <= 99 && !isNaN(num)) {
                            numbers.push(num);
                        }
                    }
                });
                
                if (numbers.length > 0) {
                    numbers.forEach(num => {
                        bets.push({
                            number: num,
                            amount: amount1,
                            display: num.toString().padStart(2, '0'),
                            type: 'Group Reverse'
                        });
                        
                        const revNum = reverseNumber(num);
                        bets.push({
                            number: revNum,
                            amount: amount2,
                            display: revNum.toString().padStart(2, '0'),
                            type: 'Group Reverse'
                        });
                    });
                    
                    return bets;
                }
            }
        }
        
        return [];
    }

    // Parse complex reverse bets like "24-1000r500"
    function parseReverseComplexBet(line) {
        const bets = [];
        
        const complexReverseMatch = line.match(/^(\d{1,2})[\-\s\.]*(\d+)\s*r\s*(\d+)$/);
        if (complexReverseMatch) {
            const [, numStr, amount1Str, amount2Str] = complexReverseMatch;
            const num = parseInt(numStr);
            const amount1 = parseInt(amount1Str);
            const amount2 = parseInt(amount2Str);
            
            if (num >= 0 && num <= 99 && amount1 >= 100 && amount2 >= 100) {
                const revNum = reverseNumber(num);
                
                bets.push({
                    number: num,
                    amount: amount1,
                    display: num.toString().padStart(2, '0'),
                    type: 'Reverse'
                });
                
                bets.push({
                    number: revNum,
                    amount: amount2,
                    display: revNum.toString().padStart(2, '0'),
                    type: 'Reverse'
                });
                
                return bets;
            }
        }
        
        return [];
    }

    // Parse simple reverse bets like "12r1000" or "23r1000-500"
    function parseSimpleReverseBet(line) {
        const bets = [];
        const rPos = line.toLowerCase().indexOf('r');
        
        if (rPos === -1) return [];
        
        const beforeR = line.substring(0, rPos).trim();
        const afterR = line.substring(rPos + 1).trim();
        
        const numbersBefore = [];
        const numberMatches = beforeR.match(/\d+/g);
        if (numberMatches) {
            numberMatches.forEach(match => {
                const num = parseInt(match);
                if (num >= 0 && num <= 99 && !isNaN(num)) {
                    numbersBefore.push(num);
                }
            });
        }
        
        const amounts = [];
        const amountMatches = afterR.match(/\d+/g);
        if (amountMatches) {
            amountMatches.forEach(match => {
                const amount = parseInt(match);
                if (amount >= 100 && !isNaN(amount)) {
                    amounts.push(amount);
                }
            });
        }
        
        if (numbersBefore.length === 0 || amounts.length === 0) return [];
        
        if (amounts.length === 1) {
            numbersBefore.forEach(num => {
                bets.push({
                    number: num,
                    amount: amounts[0],
                    display: num.toString().padStart(2, '0'),
                    type: 'Reverse'
                });
                
                const revNum = reverseNumber(num);
                bets.push({
                    number: revNum,
                    amount: amounts[0],
                    display: revNum.toString().padStart(2, '0'),
                    type: 'Reverse'
                });
            });
        } else {
            numbersBefore.forEach((num, index) => {
                const amountIndex = Math.min(index, amounts.length - 1);
                const revAmountIndex = Math.min(index + 1, amounts.length - 1);
                
                bets.push({
                    number: num,
                    amount: amounts[amountIndex],
                    display: num.toString().padStart(2, '0'),
                    type: 'Reverse'
                });
                
                const revNum = reverseNumber(num);
                bets.push({
                    number: revNum,
                    amount: amounts[revAmountIndex],
                    display: revNum.toString().padStart(2, '0'),
                    type: 'Reverse'
                });
            });
        }
        
        return bets;
    }

    // Parse wheel bet (ခွေ, ခွေပူး)
    function parseWheelBet(line) {
        const bets = [];
        const isDouble = line.includes('ခွေပူး');
        const separator = isDouble ? 'ခွေပူး' : 'ခွေ';
        const parts = line.split(separator);
        
        if (parts.length < 2) return bets;
        
        const basePart = parts[0];
        const amountPart = parts[1];
        
        const baseNumbers = basePart.replace(/\D/g, '');
        const amount = parseInt(amountPart.replace(/\D/g, ''));
        
        if (!baseNumbers || !amount || amount < 100) return bets;
        
        const pairs = [];
        for (let i = 0; i < baseNumbers.length; i++) {
            for (let j = 0; j < baseNumbers.length; j++) {
                if (i !== j) {
                    const num = parseInt(baseNumbers[i] + baseNumbers[j]);
                    if (!pairs.includes(num)) {
                        pairs.push(num);
                    }
                }
            }
        }
        
        if (isDouble) {
            for (const d of baseNumbers) {
                const doubleNum = parseInt(d + d);
                if (!pairs.includes(doubleNum)) {
                    pairs.push(doubleNum);
                }
            }
        }
        
        pairs.forEach(num => {
            bets.push({
                number: num,
                amount: amount,
                display: num.toString().padStart(2, '0'),
                type: isDouble ? 'Wheel Double' : 'Wheel'
            });
        });
        
        return bets;
    }

    // Parse special bet
    function parseSpecialBet(line, caseName, caseNumbers) {
        const bets = [];
        const amountStr = line.replace(caseName, '').replace(/\D/g, '');
        const amount = parseInt(amountStr);
        
        if (amount && amount >= 100) {
            caseNumbers.forEach(num => {
                bets.push({
                    number: num,
                    amount: amount,
                    display: num.toString().padStart(2, '0'),
                    type: caseName
                });
            });
        }
        
        return bets;
    }

    // Parse Even/Odd bet
    function parseEvenOddBet(line, caseName, caseType) {
        const bets = [];
        const amountStr = line.replace(caseName, '').replace(/\D/g, '');
        const amount = parseInt(amountStr);
        
        if (amount && amount >= 100) {
            const numbers = generateEvenOddNumbers(caseType, line.includes('r'));
            
            numbers.forEach(num => {
                bets.push({
                    number: num,
                    amount: amount,
                    display: num.toString().padStart(2, '0'),
                    type: caseName + (line.includes('r') ? ' R' : '')
                });
            });
        }
        
        return bets;
    }

    // Generate numbers for Even/Odd system
    function generateEvenOddNumbers(caseType, includeReverse = false) {
        const numbers = [];
        
        if (caseType.first === 'even' && caseType.second === 'even') {
            for (const first of evenDigits) {
                for (const second of evenDigits) {
                    numbers.push(first * 10 + second);
                }
            }
        } else if (caseType.first === 'odd' && caseType.second === 'odd') {
            for (const first of oddDigits) {
                for (const second of oddDigits) {
                    numbers.push(first * 10 + second);
                }
            }
        } else if (caseType.first === 'even' && caseType.second === 'odd') {
            for (const first of evenDigits) {
                for (const second of oddDigits) {
                    numbers.push(first * 10 + second);
                    if (includeReverse) {
                        numbers.push(second * 10 + first);
                    }
                }
            }
        } else if (caseType.first === 'odd' && caseType.second === 'even') {
            for (const first of oddDigits) {
                for (const second of evenDigits) {
                    numbers.push(first * 10 + second);
                    if (includeReverse) {
                        numbers.push(second * 10 + first);
                    }
                }
            }
        }
        
        return [...new Set(numbers)];
    }

    // Parse single digit with Even/Odd
    function parseSingleEvenOddBet(match) {
        const bets = [];
        const [, digitStr, evenOddType, amountStr] = match;
        const digit = parseInt(digitStr);
        const amount = parseInt(amountStr);
        
        if (amount >= 100) {
            const numbers = [];
            const includeReverse = match[0].includes('r');
            
            if (evenOddType === 'စုံ') {
                for (const evenDigit of evenDigits) {
                    numbers.push(digit * 10 + evenDigit);
                    if (includeReverse) {
                        numbers.push(evenDigit * 10 + digit);
                    }
                }
            } else {
                for (const oddDigit of oddDigits) {
                    numbers.push(digit * 10 + oddDigit);
                    if (includeReverse) {
                        numbers.push(oddDigit * 10 + digit);
                    }
                }
            }
            
            const uniqueNumbers = [...new Set(numbers)];
            
            uniqueNumbers.forEach(num => {
                bets.push({
                    number: num,
                    amount: amount,
                    display: num.toString().padStart(2, '0'),
                    type: digit + evenOddType + (includeReverse ? ' R' : '')
                });
            });
        }
        
        return bets;
    }

    // Parse dynamic bet (ထိပ်, ပိတ်, ဘရိတ်, ပါ)
    function parseDynamicBet(line, dtype) {
        const bets = [];
        const numbers = [];
        let amount = 0;
        
        const parts = line.match(/\d+/g);
        if (parts) {
            amount = parseInt(parts[parts.length - 1]);
            const digits = parts.slice(0, -1).map(p => parseInt(p)).filter(d => d >= 0 && d <= 9);
            
            if (amount >= 100 && digits.length > 0) {
                if (dtype === 'ထိပ်') {
                    for (const d of digits) {
                        numbers.push(...Array.from({length: 10}, (_, i) => d * 10 + i));
                    }
                } else if (dtype === 'ပိတ်') {
                    for (const d of digits) {
                        numbers.push(...Array.from({length: 10}, (_, i) => i * 10 + d));
                    }
                } else if (dtype === 'ဘရိတ်') {
                    for (const d of digits) {
                        numbers.push(...Array.from({length: 100}, (_, n) => n).filter(n => (Math.floor(n/10) + n%10) % 10 === d));
                    }
                } else if (dtype === 'ပါ') {
                    for (const d of digits) {
                        const tens = Array.from({length: 10}, (_, i) => d * 10 + i);
                        const units = Array.from({length: 10}, (_, i) => i * 10 + d);
                        numbers.push(...tens, ...units);
                    }
                }
                
                const uniqueNumbers = [...new Set(numbers)];
                
                uniqueNumbers.forEach(num => {
                    bets.push({
                        number: num,
                        amount: amount,
                        display: num.toString().padStart(2, '0'),
                        type: dtype
                    });
                });
            }
        }
        
        return bets;
    }

    // Parse regular bet (fallback method)
    function parseRegularBet(line) {
        const bets = [];
        
        const universalMatch = line.match(/^([\d\s\S]+?)[\-\=\+\/\*\@\#\$\%\&\_\"\'\:\;\!\(\)\?\\\.\, ]+(\d+)$/);
        if (universalMatch) {
            const numbersPart = universalMatch[1].trim();
            const amount = parseInt(universalMatch[2]);
            
            if (amount >= 100) {
                const numberStrings = numbersPart.split(/[\/\-\*\.\s]+/);
                const numbers = numberStrings.map(str => {
                    const numStr = str.replace(/\D/g, '');
                    if (numStr.length === 1 || numStr.length === 2) {
                        const num = parseInt(numStr);
                        return num >= 0 && num <= 99 ? num : null;
                    }
                    return null;
                }).filter(num => num !== null);
                
                numbers.forEach(num => {
                    bets.push({
                        number: num,
                        amount: amount,
                        display: num.toString().padStart(2, '0'),
                        type: 'Regular'
                    });
                });
                
                if (bets.length > 0) return bets;
            }
        }
        
        const allNumbers = line.match(/\d+/g) || [];
        
        if (allNumbers.length >= 2) {
            for (let i = 0; i < allNumbers.length - 1; i++) {
                const num = parseInt(allNumbers[i]);
                const nextNum = parseInt(allNumbers[i + 1]);
                
                if (num >= 0 && num <= 99 && nextNum >= 100) {
                    bets.push({
                        number: num,
                        amount: nextNum,
                        display: num.toString().padStart(2, '0'),
                        type: 'Regular'
                    });
                }
            }
        }
        
        return bets;
    }

    // Function to clear input
    function clearInput() {
        betInput.value = '';
        betInput.focus();
    }

    // Function to clear all bets
    function clearAllBets() {
        if (bets.length === 0) {
            alert('မရှိပါ');
            return;
        }
        
        if (confirm('လောင်းကြေးအားလုံးကိုဖျက်မှာသေချာပါသလား?')) {
            bets = [];
            totalAmount = 0;
            updateDisplay();
        }
    }

    // Function to save bets
    function saveBets() {
        if (bets.length === 0) {
            alert('မရှိပါ');
            return;
        }
        
        alert(`လောင်းကြေးများသိမ်းဆည်းပြီးပါပြီ။\nစုစုပေါင်း: ${bets.length} ခု\n${totalAmount.toLocaleString()}`);
    }

    // Function to delete a bet
    function deleteBet(index) {
        if (confirm('ဖျက်မှာသေချာပါသလား?')) {
            const deletedBet = bets[index];
            totalAmount -= deletedBet.amount;
            bets.splice(index, 1);
            updateDisplay();
        }
    }

    // Function to update display
    function updateDisplay() {
        // Update bet list
        if (bets.length === 0) {
            betList.innerHTML = '<div class="empty-message">လောင်းကြေးမရှိသေးပါ</div>';
        } else {
            betList.innerHTML = '';
            bets.forEach((bet, index) => {
                const betItem = document.createElement('div');
                betItem.className = `bet-item ${bet.type.includes('Special') || bet.type.includes('Wheel') ? 'special-bet' : ''}`;
                
                betItem.innerHTML = `
                    <div class="bet-number">${bet.display}</div>
                    <div class="bet-amount">${bet.amount.toLocaleString()}</div>
                    <div class="bet-type">${bet.type}</div>
                    <button class="delete-btn" onclick="deleteBet(${index})">ဖျက်</button>
                `;
                
                betList.appendChild(betItem);
            });
            
            // Auto scroll to bottom to see the last item
            setTimeout(() => {
                const listView = document.querySelector('.list-view');
                listView.scrollTop = listView.scrollHeight;
            }, 100);
        }
        
        // Update total amount and count
        totalAmountDisplay.textContent = `${totalAmount.toLocaleString()}`;
        listCount.textContent = bets.length;
    }

    // Initialize
    updateDisplay();
</script>
</body>
</html>
